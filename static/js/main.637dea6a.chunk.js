(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(7),l=n.n(o),r=n(1),i=n(2),c=n(4),u=n(3),m=n(5),f=(n(14),function(e){return e.data.isOpen?e.data.hasMine?s.a.createElement("div",{className:"cell open",onContextMenu:function(e){e.preventDefault()},onClick:function(){return e.open(e.data)}},s.a.createElement("img",{src:"./assets/bomb-solid.svg",alt:"mines bomb svg icon"})):0===e.data.count?s.a.createElement("div",{className:"cell open",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}}):s.a.createElement("div",{className:"cell open",onContextMenu:function(e){e.preventDefault()},onClick:function(){return e.open(e.data)}},e.data.count):e.data.hasFlag?s.a.createElement("div",{className:"cell open-flag",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}},s.a.createElement("img",{src:"./assets/flag-regular.svg",alt:"svg icon flag"})):s.a.createElement("div",{className:"cell",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}})}),p=function(e){var t=e.cells.map(function(t,n){return s.a.createElement(f,{key:n,data:t,open:e.open,flag:e.flag})});return s.a.createElement("div",{className:"row"},t)},h=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).createBoard=function(e){for(var t=[],n=0;n<e.rows;n++){t.push([]);for(var a=0;a<e.columns;a++)t[n].push({x:a,y:n,count:0,isOpen:!1,hasMine:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var o=Math.floor(Math.random()*e.rows),l=Math.floor(Math.random()*e.columns),r=t[o][l];r.hasMine?s--:r.hasMine=!0}return t},n.flag=function(e){if("ended"!==n.props.status&&!e.isOpen){var t=n.state.rows;e.hasFlag=!e.hasFlag,n.setState({rows:t}),n.props.changeFlagAmount(e.hasFlag?-1:1)}},n.open=function(e){new Promise(function(t){t(n.findMines(e))}).then(function(t){var a=n.state.rows,s=a[e.y][e.x];if(s.hasMine&&0===n.props.openCells){console.log("mine was on first click");var o=n.createBoard(n.props);n.setState({rows:o},function(){n.open(e)})}else e.hasFlag||s.isOpen||(n.props.handleCellClick(),s.isOpen=!0,s.count=t,n.setState({rows:a}),s.hasMine||0!==t||n.findAroundCell(e),s.hasMine&&0!==n.props.openCells&&n.props.endGame())})},n.findMines=function(e){for(var t=n.state.rows,a=0,s=-1;s<=1;s++)for(var o=-1;o<=1;o++)e.y+s>=0&&e.x+o>=0&&e.y+s<t.length&&e.x+o<t[0].length&&(!t[e.y+s][e.x+o].hasMine||0===s&&0===o||a++);return a},n.findAroundCell=function(e){for(var t=n.state.rows,a=-1;a<=1;a++)for(var s=-1;s<=1;s++)e.y+a>=0&&e.x+s>=0&&e.y+a<t.length&&e.x+s<t[0].length&&(t[e.y+a][e.x+s].hasMine||t[e.y+a][e.x+s].isOpen||n.open(t[e.y+a][e.x+s]))},n.state={rows:n.createBoard(e)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){(this.props.openCells>e.openCells||this.props.columns!==e.columns)&&this.setState({rows:this.createBoard(e)})}},{key:"render",value:function(){var e=this,t=this.state.rows.map(function(t,n){return s.a.createElement(p,{cells:t,flag:e.flag,key:n,open:e.open})});return s.a.createElement("div",{className:"board"},t)}}]),t}(a.Component),d=function(e){var t=Math.floor(e.time/60),n=e.time-60*t||0,a=n<10?"0".concat(n):n,o="".concat(t,":").concat(a),l="running"===e.status||"waiting"===e.status?s.a.createElement("img",{src:"./assets/laugh-beam-regular.svg",alt:"happy svg smile emoji"}):s.a.createElement("img",{src:"./assets/sad-cry-regular.svg",alt:"sad svg smile emoji"});return s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},e.flags),s.a.createElement("button",{className:"reset",onClick:e.reset},l),s.a.createElement("div",{className:"timer"},o))},g=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).endGame=function(){e.setState({status:"ended"})},e.checkForWinner=function(){e.state.mines+e.state.openCells>=e.state.rows*e.state.columns&&e.setState({status:"winner"},alert("You won!"))},e.reset=function(){e.intervals.map(clearInterval),e.setState(Object.assign({},e.baseState),function(){e.intervals=[]})},e.tick=function(){if(e.state.openCells>0&&"running"===e.state.status){var t=e.state.time+1;e.setState({time:t})}},e.setInterval=function(t,n){e.intervals.push(setInterval(t,n))},e.hanldeCellClick=function(){0===e.state.openCells&&"running"!==e.state.status&&e.setState({status:"running"},e.setInterval(e.tick,1e3)),e.setState(function(e){return{openCells:e.openCells+1}})},e.changeFlagAmount=function(t){e.setState({flags:e.state.flags+t})},e.state={status:"waiting",rows:10,columns:10,flags:10,mines:10,time:0,openCells:0},e.baseState=e.state,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){"running"===this.state.status&&this.checkForWinner()}},{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"render",value:function(){return s.a.createElement("div",{className:"minesweeper"},s.a.createElement("h2",null,"Minesweeper with React!"),s.a.createElement(d,{time:this.state.time,flags:this.state.flags,reset:this.reset,status:this.state.status}),s.a.createElement(h,{status:this.state.status,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,openCells:this.state.openCells,handleCellClick:this.hanldeCellClick,endGame:this.endGame,changeFlagAmount:this.changeFlagAmount}))}}]),t}(a.Component);l.a.render(s.a.createElement(g,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.637dea6a.chunk.js.map